<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"><!-- Add Bootstrap CSS -->
    <link href=
    "https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    rel="stylesheet">
    <title>Hello World!</title>
    <script>
    // Function to toggle the visibility of the "minutes" input
    function fadeBackgroundImage(newImageUrl) {
         var body = document.getElementsByTagName("body")[0];
    var fadeInDuration = 200; // Adjust the duration as needed
    var fadeOutDuration = 200; // Adjust the duration as needed

    var tempDiv = document.createElement("div");
    tempDiv.style.position = "fixed";
    tempDiv.style.top = "0";
    tempDiv.style.left = "0";
    tempDiv.style.width = "100%";
    tempDiv.style.height = "100%";
    tempDiv.style.backgroundImage = "url('" + newImageUrl + "')";
    tempDiv.style.opacity = 0;
    tempDiv.style.transition = "opacity " + fadeInDuration + "ms ease-in-out";

    // Add the temporary div to the body
    body.prepend(tempDiv);

    // Force a repaint to ensure the transition is applied
    tempDiv.offsetHeight;

    // Fade in the new image
    tempDiv.style.opacity = 1;

    // After the fadeInDuration, remove the old background and the temporary div
    setTimeout(function () {
        body.style.backgroundImage = "url('" + newImageUrl + "')";
        tempDiv.style.opacity = 0;
        setTimeout(function () {
            body.removeChild(tempDiv);
        }, fadeOutDuration);
    }, fadeInDuration);
    }

    function toggleBackground() {
        var mode = document.getElementById("gameModeRadio");
    if (mode.checked) {
         fadeBackgroundImage("http://localhost:8327/game.jpg");
     } else {
         fadeBackgroundImage("http://localhost:8327/study.jpg");
     }
     }

     function toggleMinutesInput() {
         var gameModeRadio = document.getElementById("gameModeRadio");
     var minutesInput = document.getElementById("minutesInput");

     // Check if the "Game Mode" radio button is selected
     if (gameModeRadio.checked) {
       minutesInput.style.display = "none"; // Hide the input
     } else {
       minutesInput.style.display = "block"; // Show the input
     }
         setTimeout(toggleBackground, 100);
         setTimeout(toggleTextFont, 100);
     }

     document.addEventListener("DOMContentLoaded", function(event) {
     toggleMinutesInput();
    });

     function fadeTextFont(newFont) {
    var fadeDuration = 200; // Adjust the duration as needed
    var initialFont = getComputedStyle(textElement).fontFamily;

    textElement.style.transition = "font " + fadeDuration + "ms ease-in-out";
    textElement.style.fontFamily = newFont;

    // After the fadeDuration, remove the transition property
    setTimeout(function () {
        textElement.style.transition = "";
    }, fadeDuration);
}

function toggleTextFont() {
    if (mode.checked) {
        fadeTextFont("Arial, sans-serif");
    } else {
        fadeTextFont("Times New Roman, serif");
    }
     }

     function reportStart() {
         var mode = document.getElementById("gameModeRadio");
        var minutes = document.getElementById("minutes");
        var time = minutes.value;
        var request = new XMLHttpRequest();
        request.open("POST", "http://localhost:8327/start", true);
        request.setRequestHeader("Content-Type", "application/json");
        request.send(JSON.stringify({
            mode: mode.checked ? 1 : 0,
            time: time
        }));
         return false;
    }
    </script>
</head>
<body>
    <div class=
    "container mt-5 h-100 justify-content-center align-items-center"
    style="">
        <div class="card p-5" style="background-color: rgba(255, 255, 255, 0.7);">
            <div class="text-center">
                <h1>Focus Pomodoro</h1>
                <hr>
            </div>
            <form class="border-1" action="#" onsubmit="reportStart()">
                <div class="form-group row">
                    <legend class=
                    "col-form-label col-2 pt-0">Mode:</legend>
                    <div id="mode" class="col">
                        <div class="form-check">
                            <input type="radio" id="studyModeRadio"
                            class="form-check-input" name="mode"
                            value="0" onchange=
                            "toggleMinutesInput()" checked>
                            <label class="form-check-label" for=
                            "studyModeRadio">Study Mode</label>
                        </div>
                        <div class="form-check">
                            <input type="radio" id="gameModeRadio"
                            class="form-check-input" name="mode"
                            value="1" onchange=
                            "toggleMinutesInput()"> <label class=
                            "form-check-label" for=
                            "gameModeRadio">Game Mode</label>
                        </div>
                    </div>
                </div>
                <div id="minutesInput" class="form-group">
                    <label for="minutes">Minutes</label>
                    <input type="number" id="minutes" class=
                    "form-control" name="time" value="25" min="1"
                    max="60">
                </div>
                <div class="form-group d-flex mt-5">
                    <input type="submit" class=
                    "btn btn-primary m-auto w-50" value="Start" onclick="reportStart()">
                </div>
            </form>
        </div>
    </div>
    <!-- Add Bootstrap JS and Popper.js (required for Bootstrap dropdowns and other features) -->
    <script src=
    "https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src=
    "https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>

    <script src=
    "https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
